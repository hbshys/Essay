#移动平台数据挖掘实施方案

<center>Version 0.0.1</center>

<center>于鹏飞</center>

本文档编写时，实际的数据分析系统并未开始编写，因此在实现的过程中如果使用的方案与该文档不一致，请及时更新该文档。

## 主要方向

本文档主要用于蚁动项目的数据分析，并且具有演化为一个包含以下三种主要能力的数据挖掘框架。

+ 数据仓库 将所有人历史的聊天记录、住宿信息、选课信息、分享的信息等汇集到HBase及HDFS，做永久存储以便分析之用，同时提供Hive等数据分析工具的操作说明，便于研发人员快速的对数据进行探索；

+ 数据分析 提供Hive等工具，配合使用Python相关的一系列数据挖掘工具。提供实时的或者离线的数据分析能力，实时的数据分析主要用于

	1. 对敏感信息进行过滤，要求可以随时添加需要过滤的词；

	1. 聊天记录、朋友圈词频统计，对每小时指定的词出现的频率进行累加；

离线的数据分析主要用于

	1. 报表 制定若干报表，每天或者每周出一次报表，使得开发和运营团队对产品的情况有较为清晰的了解，部分报表可以提供给合作伙伴；

	1. 提供结果给蚁动 对于一些离线计算如关系网分析生成的结果，可以提供给蚁动的服务器，方便蚁动服务器向客户端发送好友推荐。

+ 数据可视化 将各个报表的信息、实时分析得到的结论等，展示到网页上。

针对蚁动项目的数据挖掘的需求，目前可以做的数据分析有

+ 好友推荐 关系网分析的应用之一，主要针对有共同好友的人可能相互认识的概率比较大（在同一班级的人好友的推荐由服务器完成即可）；

+ 关系网分析 对高校好友的关系网进行系统的分析，例如平均每个人有多少朋友、拥有朋友最多的人、是否有不同的朋友圈相互割裂等问题，用以反馈给开发和运营团队；

+ 热点推荐 在上线后可能展开内容运营，一个文章点击的次数越多、被点赞回复的人越多，证明关注的人越多。对于该类热点，可能需要对更多的人推荐；

+ 全文搜索 包括对自己发表过的说说，所有公开的说说、投票等，进行全局的搜索；

+ 人员聚类(虚拟人格) 根据用户所在学校、所学专业、学业成绩、聊天记录的特征、发布说说的特征、关注消息的特征等，将在校学生聚类为若干类，然后人工打一些标签。这一结果可以出售给合作伙伴；

+ 行为演进（自杀倾向分析） 对单个人的历史状态提取一些特征，作为结果出售给合作伙伴；

+ 精准营销（推荐系统学习算法） 根据人员聚类和行为演进的结果，进行人为的标注后，可以针对某些类别的人投放广告。对于所有投放的广告，记录广告的效果，例如点击还是没有点击等，效果差的广告应该着重分析；

+ 敏感信息实时过滤 之前描述过；

+ 热点词实时计数 之前描述过；

+ 用户活跃度(社交蒸发) 分析用户发表的聊天数目、说说数目是不是在增多。如果某些类别的用户使用软件的热情大幅上升或者下降，应该重点关注；

+ 用户消费行为分析 不知道怎么做；

//TODO 添加更多的数据挖掘需求

## 系统架构

整个系统基于Hadoop搭建，综合采用MapReduce、Spark两项技术，多数操作为offline，实时性不强。使用的主要部件有

+ HDFS，用于大型文件的存储，例如讲大量的聊天记录一行一行的写入文本文件，一个文件可能几个GB大；

+ HBase，用于小型、结构化数据的存储，主要倾向于存储可能经常需要查询的数据；

+ Hive，用于使用类似SQL语句对系统进行查询；

+ Yarn，用于计算资源的分配、调度，我们不应该在Yarn上直接编程；

+ MapReduce，一部分计算如对聊天记录的分析，可以使用MapReduce算法，其它需要多次迭代的算法，使用Spark可能更快速；

+ Spark，处理需要多次迭代的如分类、聚类、关系网分析等；

+ Mahout，鉴于其实现了分类、聚类等算法，可以直接使用部分算法，降低开发成本；

+ GraphX，鉴于其实现了关系网分析的众多算法，可以直接使用，降低开发成本。

## 好友推荐

### 算法简介

两个人具有更多的相同的好友更有可能是好友，相关算法和具体实现方案在《Data Algorithms Recipes for Scaling Up with Hadoop and Spark》可以查到。

### 实现方案

建议参考书编写MapReduce版本和Spark版本，便于对两者进行系统的掌握，两个版本性能差异不应该特别大，Spark会更快。

## 关系网分析

### 算法简介

关系网相关的书可以参考<网络科学导论>

### 实现方案

使用GraphX on Spark实现。

## 热点推荐

### 算法简介

相关算法可以在《Data Algorithms Recipes for Scaling Up with Hadoop and Spark》可以查到。

### 实现方案

使用Mapreduce算法进行计数即可

## 全文搜索

### 算法简介

使用现有技术

### 实现方案

## 人员聚类

### 算法简介

相关算法可以在《Data Algorithms Recipes》内查到，具体的分析可以在《模式分类》《模式识别》两本书查到。在使用之前需要过滤停止词，kNN和k-means算法均可以使用，我认为kNN可能会更好，有待考证。

### 实现方案

使用Mahout on Spark实现，因为我们可能需要对结果的准确度进行度量，自行编写代码较为复杂。

## 行为演进

### 算法简介

总的来说，这个问题可以当成隐马尔可夫模型对待，算法可以在《Data Algorithms Recipes》找到，也可在各种自然语言处理的教材找到。但是人的状态有多少个，具体的时间粒度应该是多少，需要仔细的研究。建议这个问题放到最后解决，开始的时候可以只提取关键词做成随着时间轴变化的词序列，可以使用MapReduce算法获得。

### 实现方案

分为两步，首先提取随着时间轴变化的词序列，之后使用隐马尔可夫模型。

## 精准营销

### 算法简介

MapReduce计数实现。

### 实现方案

## 用户活跃度

### 算法简介

MapReduce计数实现。

### 实现方案

## 平台下一步的展望

## 附录一 常用算法简介



